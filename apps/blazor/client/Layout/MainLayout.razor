<MudAppBar Color="Color.Surface" Elevation="0">
    <MudTooltip Text="Toggle Drawer">
        <MudIconButton Icon="@Icons.Material.Rounded.Notes" Color="Color.Inherit" Edge="Edge.Start"
            OnClick="@((e) => DrawerToggle())" />
    </MudTooltip>
    <MudButton Variant="Variant.Text" Color="Color.Transparent" Href="/" DropShadow="false">
         AMIS
     </MudButton>
    <MudSpacer />
    <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="true">
        <MudToggleIconButton @bind-Toggled="@_isDarkMode" Icon="@Icons.Material.Filled.WbSunny"
                             Color="@Color.Warning" title="off" Class="d-flex ml-auto" ToggledIcon="@Icons.Material.Filled.DarkMode"
                             ToggledColor="@Color.Surface" toggledTitle="on" style="left:8px!important" @onclick="@ToggleDarkMode" />
        <MudTooltip Text="Support">
             <MudMenu Icon="@Icons.Material.Filled.SupportAgent" Color="Color.Inherit" Dense="true" AnchorOrigin="Origin.CenterRight">
                <MudText Typo="Typo.body2" Class="px-4 py-2"><b>Community</b></MudText>
                <MudMenuItem Href="https://discord.gg/yQWpShsKrf" Target="_blank">Discord</MudMenuItem>
                <MudMenuItem Href="https://www.facebook.com/roel.capirig" Target="_blank">Facebook
                </MudMenuItem>
                <MudMenuItem Href="https://www.linkedin.com/in/iammukeshm/" Target="_blank">LinkedIn</MudMenuItem>
                <MudMenuItem Href="https://www.buymeacoffee.com/codewithmukesh" Target="_blank">Buy Me a Coffee!
                </MudMenuItem>
            </MudMenu>
        </MudTooltip>
        
    </MudHidden>
    <MudHidden Breakpoint="Breakpoint.SmAndDown" Invert="true">
        <MudMenu Icon="@Icons.Material.Filled.Settings" Color="Color.Inherit" Dense="true" AnchorOrigin="Origin.CenterRight">
                        <MudText Typo="Typo.body2" Class="px-4 py-2"><b>Community</b></MudText>
            <MudMenuItem Href="https://discord.gg/yQWpShsKrf" Target="_blank">Discord</MudMenuItem>
            <MudMenuItem Href="https://www.facebook.com/roel.capirig" Target="_blank">Facebook
            </MudMenuItem>
            
        </MudMenu>
    </MudHidden>
     <MudMenu DropShadow="false" PopoverClass="mud-elevation-25" AnchorOrigin="Origin.BottomRight" LockScroll="true" TransformOrigin="Origin.TopRight">
        <ActivatorContent>
            <MudIconButton Icon="@Icons.Material.Filled.Person" Color="Color.Inherit" />
        </ActivatorContent>
        <ChildContent>
            <div class="py-2" style="min-width: 220px">
                <MudMenuItem OnClick="Profile">
                    <div class="d-flex">
                        <MudIcon Class="mx-2" Icon="@Icons.Material.Filled.Person" />
                        <MudText>Account</MudText>
                    </div>
                </MudMenuItem>
                <MudMenuItem Href="/dashboard">
                    <div class="d-flex">
                        <MudIcon Class="mx-2" Icon="@Icons.Material.Filled.Dashboard" />
                        <MudText>Dashboard</MudText>
                    </div>
                </MudMenuItem>
                <div class="mt-4 mx-4">
                    <MudButton Color="Color.Error" FullWidth="true" StartIcon="@Icons.Material.Filled.Logout" DropShadow="false"
                        Variant="Variant.Filled" OnClick="Logout">
                        Logout
                    </MudButton>
                </div>
            </div>
        </ChildContent>
    </MudMenu>
</MudAppBar>
<MudDrawer @bind-Open="_drawerOpen" outlined ClipMode="DrawerClipMode.Never">
    <NavMenu />
</MudDrawer>

<MudMainContent>
    <MudContainer MaxWidth="MaxWidth.False" Class="px-6 py-6">
        @if (_showDashboard)
        {
            <MudStack Class="mb-6" Spacing="2">
                <MudText Typo="Typo.h5">Dashboard</MudText>
                <MudText Typo="Typo.subtitle2">Quick overview of key catalog metrics</MudText>
            </MudStack>

            <MudGrid Class="mb-6">
                <MudItem xs="12" sm="6" md="4" lg="2">
                    <MudPaper Class="pa-4" Elevation="1">
                        <div class="d-flex align-center justify-between">
                            <div>
                                <MudText Typo="Typo.subtitle2">Purchases</MudText>
                                <MudText Typo="Typo.h5">@_purchaseCount</MudText>
                            </div>
                            <MudIcon Icon="@Icons.Material.Filled.Receipt" Color="Color.Info" Size="Size.Large" />
                        </div>
                        <MudButton Variant="Variant.Text" Color="Color.Info" OnClick="@(() => Navigation.NavigateTo("/catalog/purchases"))">View</MudButton>
                    </MudPaper>
                </MudItem>

                <MudItem xs="12" sm="6" md="4" lg="2">
                    <MudPaper Class="pa-4" Elevation="1">
                        <div class="d-flex align-center justify-between">
                            <div>
                                <MudText Typo="Typo.subtitle2">Inspection Requests</MudText>
                                <MudText Typo="Typo.h5">@_inspectionRequestCount</MudText>
                            </div>
                            <MudIcon Icon="@Icons.Material.Filled.Assignment" Color="Color.Primary" Size="Size.Large" />
                        </div>
                        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(() => Navigation.NavigateTo("/catalog/inspectionrequests"))">View</MudButton>
                    </MudPaper>
                </MudItem>

                <MudItem xs="12" sm="6" md="4" lg="2">
                    <MudPaper Class="pa-4" Elevation="1">
                        <div class="d-flex align-center justify-between">
                            <div>
                                <MudText Typo="Typo.subtitle2">Inspections</MudText>
                                <MudText Typo="Typo.h5">@_inspectionsCount</MudText>
                            </div>
                            <MudIcon Icon="@Icons.Material.Filled.Search" Color="Color.Success" Size="Size.Large" />
                        </div>
                        <MudButton Variant="Variant.Text" Color="Color.Success" OnClick="@(() => Navigation.NavigateTo("/catalog/inspections"))">View</MudButton>
                    </MudPaper>
                </MudItem>

                <MudItem xs="12" sm="6" md="4" lg="2">
                    <MudPaper Class="pa-4" Elevation="1">
                        <div class="d-flex align-center justify-between">
                            <div>
                                <MudText Typo="Typo.subtitle2">Acceptances</MudText>
                                <MudText Typo="Typo.h5">@_acceptancesCount</MudText>
                            </div>
                            <MudIcon Icon="@Icons.Material.Filled.HowToReg" Color="Color.Tertiary" Size="Size.Large" />
                        </div>
                        <MudButton Variant="Variant.Text" Color="Color.Tertiary" OnClick="@(() => Navigation.NavigateTo("/catalog/acceptances"))">View</MudButton>
                    </MudPaper>
                </MudItem>

                <MudItem xs="12" sm="6" md="4" lg="2">
                    <MudPaper Class="pa-4" Elevation="1">
                        <div class="d-flex align-center justify-between">
                            <div>
                                <MudText Typo="Typo.subtitle2">Suppliers</MudText>
                                <MudText Typo="Typo.h5">@_suppliersCount</MudText>
                            </div>
                            <MudIcon Icon="@Icons.Material.Filled.Store" Color="Color.Warning" Size="Size.Large" />
                        </div>
                        <MudButton Variant="Variant.Text" Color="Color.Warning" OnClick="@(() => Navigation.NavigateTo("/catalog/suppliers"))">View</MudButton>
                    </MudPaper>
                </MudItem>

                <MudItem xs="12" sm="6" md="4" lg="2">
                    <MudPaper Class="pa-4" Elevation="1">
                        <div class="d-flex align-center justify-between">
                            <div>
                                <MudText Typo="Typo.subtitle2">Refresh</MudText>
                                <MudText Typo="Typo.caption">Update metrics</MudText>
                            </div>
                            <MudIconButton Icon="@Icons.Material.Filled.Refresh" Color="Color.Default" OnClick="@LoadDashboardAsync" />
                        </div>
                        <MudText Typo="Typo.caption" Class="text-secondary">Last updated: @_lastUpdatedLocal</MudText>
                    </MudPaper>
                </MudItem>
            </MudGrid>
        }
        @ChildContent
        <MudScrollToTop TopOffset="400" Style="z-index:2000;">
            <MudFab StartIcon="@Icons.Material.Filled.KeyboardArrowUp" Color="Color.Primary" />
        </MudScrollToTop>
    </MudContainer>
</MudMainContent>