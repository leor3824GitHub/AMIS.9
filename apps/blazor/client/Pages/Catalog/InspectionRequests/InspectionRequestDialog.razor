<EditForm Model="@Model" OnValidSubmit="OnValidSubmit">
    <MudDialog>
        <DialogContent>
            <FshValidation @ref="_customValidation" />
            <DataAnnotationsValidator />
            <ValidationSummary />

            <MudGrid>
            <MudItem xs="12" sm="6" md="4">
                <MudSelect T="Guid?" Label="Purchase Order" @bind-Value="Model.PurchaseId"
                           Placeholder="Select a purchase order by date"
                           Clearable="true">
                    @foreach (var purchase in _purchases)
                    {
                        <MudSelectItem T="Guid?" Value="purchase.Id">
                            @(purchase.PurchaseDate?.ToString("yyyy-MM-dd") ?? "No Date")
                        </MudSelectItem>
                    }
                </MudSelect>
            @{
                var SelectedPurchase = _purchases.FirstOrDefault(s => s.Id == Model.PurchaseId);
            }
           <!-- Supplier Info directly under Purchase -->
                    <MudText Typo="Typo.body1" Class="mt-2">
                        <strong>Supplier Name:</strong> @(SelectedPurchase?.Supplier?.Name ?? "N/A")
                    </MudText>
                    <MudText Typo="Typo.body1">
                        <strong>Number of Items:</strong> @(SelectedPurchase?.Items?.Count.ToString() ?? "0")
                    </MudText>
                </MudItem>

                <!-- Inspector Select -->
            
                <MudItem xs="12" sm="6" md="4">
                    <MudSelect T="Guid?" Label="Inspector" @bind-Value="Model.InspectorId"
                               Placeholder="Select a employee"
                               Clearable="true">
                        @foreach (var employee in _employees)
                        {
                            <MudSelectItem T="Guid?" Value="employee.Id">@employee.Name</MudSelectItem>
                        }
                        
                    </MudSelect>
                </MudItem>     
            </MudGrid>

        </DialogContent>

        <DialogActions>
            <MudButton Variant="Variant.Filled" Color="Color.Primary" ButtonType="ButtonType.Submit">Save</MudButton>
            <MudButton Variant="Variant.Outlined" Color="Color.Secondary" OnClick="Cancel">Cancel</MudButton>
        </DialogActions>
    </MudDialog>
</EditForm>


